{% extends "base.html" %}
{% block title %}管理员面板{% endblock %}
{% block active5 %}
        active
{% endblock %}
{% block content %}

<div class="container mt-5">

    <h2 class="text-center mb-4">管理员面板</h2>

    <!-- Flash messages block -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <div class="text-center mb-4">
        <a href="{{ url_for('admin.add_user') }}" class="btn btn-success">添加用户</a>
    </div>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>邮箱</th>
                <th>电话号码</th>
                <th>注册时间</th>
                <th>管理员</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
                <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.phone }}</td>
                    <td>{{ user.created_at }}</td>
                    <td>{{ '是' if user.is_admin else '否' }}</td>
                    <td>
                        <a href="{{ url_for('admin.edit_user', user_id=user.id) }}" class="btn btn-primary btn-sm">编辑</a>
                        <form method="POST" action="{{ url_for('admin.delete_user', user_id=user.id) }}" style="display: inline;">
                            <button type="submit" class="btn btn-danger btn-sm">删除</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

{% block sty %}
<style>
body {
    font-family: Arial, sans-serif;
    color: #333;
    margin: 0;
    padding: 0;
}

.navbar {
    margin-bottom: 30px;
}

h2 {
    margin-bottom: 30px;
    color: #000;
}

.table {
    width: 100%;
    margin-top: 20px;
}

.table th, .table td {
    text-align: left;
    padding: 10px;
}

.alert {
    margin-top: 20px;
}

.alert-dismissible .close {
    position: relative;
    top: -2px;
    right: -21px;
    color: inherit;
}

.btn-danger, .btn-primary, .btn-success {
    border-radius: 5px;
    padding: 5px 10px;
}

.container {
    max-width: 800px;
    margin: 0 auto;
}
</style>
{% endblock %}
